"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _request=require("request");var _request2=_interopRequireDefault(_request);var _events=require("events");var _events2=_interopRequireDefault(_events);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var isWebStarted=function isWebStarted(port){return new Promise(function(resolve){(0,_request2.default)({uri:"http://localhost:"+port,timeout:1000},function(error){if(error){resolve(false);}else{resolve(true);}});});};exports.default=function(port,timeout){return new Promise(function(resolve){var intervalLength=1100;var intervals=timeout/intervalLength;var event=new _events2.default();event.on("taken",function(taken){resolve(taken);});var taken=void 0;var interval=setInterval(function _callee(){return regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:intervals-=1;_context.next=3;return regeneratorRuntime.awrap(isWebStarted(port,timeout));case 3:taken=_context.sent;if(taken){event.emit("taken",true);clearInterval(interval);}if(!taken&&intervals===0){event.emit("taken",false);clearInterval(interval);}case 6:case"end":return _context.stop();}}},null,undefined);},intervalLength);});};